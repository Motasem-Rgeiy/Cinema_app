{% extends 'base.html' %}
{% load static %}
{% load my_filters %}

{% block title %}Your Cart - Cinema Booking{% endblock %}

{% block content %}
<div class="container" style="margin-top: 50px;">
    <h2>Your Cart</h2>
    
    <div class="cart-items">
        {% for ticket in my_tickets %}
        <!-- Demo Cart Item -->
        <div class="cart-item">
            <div style="display: flex; gap: 20px; align-items: center;">
                
                <img src="{{ticket.showtime.movie.image.url}}" alt="{{ticket.showtime.movie.name}}" style="width: 80px; border-radius: 8px;">
                <div>
                    <h3>{{ticket.showtime.movie.name}}</h3>
                    <p style="color: var(--text-muted);">Seat: {{ticket.seat.0|name}}{{ticket.seat.1}} | Time: {{ticket.showtime.start_time}}</p>
                </div>
            </div>
            <div style="text-align: right;">
                <p style="font-size: 1.2rem; font-weight: bold;">{{ticket.showtime.price|currency}}</p>
                <button type="button" data-url="{% url "cart_remove" ticket.id %}" class="btn" style="color: #ff4b2b; padding: 0;" onclick="cartRemove(this)">Remove</button>
            </div>
        </div>
        {% empty %}
            <div id="empty-cart-msg" style="text-align: center; padding: 40px;">
                <p style="font-size: 1.2rem; color: var(--text-muted);">Your cart is empty.</p>
                <a href="/" class="btn" style="color: #ff4b2b;">Go back to movies</a>
            </div>
        {% endfor %}
    </div>

    {% if ticket_counts > 0 %}
    
    
  

    <div style="margin-top: 30px; text-align: right; background-color: var(--secondary-bg); padding: 20px; border-radius: var(--border-radius);">
        <h3>Total: {{total|currency}}</h3>
        <a href="{% url "checkout" %}" class="btn btn-primary" style="margin-top: 10px;">Proceed to Payment</a>
    </div>
      {% endif %}
</div>
{% endblock %}
